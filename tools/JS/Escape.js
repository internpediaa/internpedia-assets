const inputHtml=document.getElementById("inputHtml"),outputHtml=document.getElementById("outputHtml"),autoUpdateCheckbox=document.getElementById("autoUpdate"),escapeBtn=document.getElementById("escapeBtn"),copyInputBtn=document.getElementById("copyInputBtn"),copyOutputBtn=document.getElementById("copyOutputBtn"),clearInputBtn=document.getElementById("clearInputBtn"),downloadBtn=document.getElementById("downloadBtn"),copyFeedback=document.getElementById("copyFeedback"),htmlEntities={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};function escapeHtml(t){return t.replace(/[<>&"']/g,t=>htmlEntities[t])}function processEscape(){let t=inputHtml.value,e=escapeHtml(t);outputHtml.value=e,autoResize(outputHtml)}async function copyToClipboard(t,e=!0){try{await navigator.clipboard.writeText(t),e&&showCopyFeedback()}catch(o){let n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),e&&showCopyFeedback()}}function showCopyFeedback(){copyFeedback.classList.add("show"),setTimeout(()=>{copyFeedback.classList.remove("show")},2e3)}function autoResize(t){t.style.height="auto",t.style.height=Math.max(200,t.scrollHeight)+"px"}inputHtml.addEventListener("input",()=>{autoResize(inputHtml),autoUpdateCheckbox.checked&&processEscape()}),escapeBtn.addEventListener("click",processEscape),copyInputBtn.addEventListener("click",()=>{copyToClipboard(inputHtml.value)}),copyOutputBtn.addEventListener("click",()=>{copyToClipboard(outputHtml.value)}),clearInputBtn.addEventListener("click",()=>{inputHtml.value="",autoUpdateCheckbox.checked&&(outputHtml.value=""),autoResize(inputHtml),autoResize(outputHtml),inputHtml.focus()}),downloadBtn.addEventListener("click",()=>{let t=outputHtml.value;if(!t.trim()){alert("No content to download");return}let e=new Blob([t],{type:"text/html"}),o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download="escaped-html.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}),autoResize(inputHtml),autoResize(outputHtml),window.addEventListener("load",()=>{inputHtml.focus()});
